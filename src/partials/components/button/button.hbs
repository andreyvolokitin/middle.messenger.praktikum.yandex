{{!
  Всегда следует добавлять атрибут `_ctx` как первый аргумент при вызове — это сотрёт родительский контекст,
  и позволит использовать локально любые переменные, не боясь пересечения с глобальными.
  https://github.com/handlebars-lang/handlebars.js/issues/1032
  https://github.com/handlebars-lang/handlebars.js/issues/1550

  Если есть непустой локальный контекст, можно использовать его вместо `_ctx`

  Нельзя устанавливать шаблону параметр `tag="input"` (и другие: https://developer.mozilla.org/en-US/docs/Web/CSS/Replaced_element),
  т.к. `<input>` не может иметь содержимого.
}}
<{{default tag "button"}}
  class="{{class}} button_{{default theme "default"}} button"
  data-display="{{default display "default"}}"
  {{#or (is tag null) (is tag "button")}}
    type="{{default type "button"}}"
  {{/or}}
  {{#and (isnt tag null) (isnt tag "a") (isnt tag "button")}}
    tabindex="{{default tabindex "0"}}"
  {{/and}}
  {{#is tag "a"}}
    href="{{default href "#"}}"
  {{/is}}
  {{#if title}}
    title="{{title}}"
  {{/if}}
  {{#if disabled}}
    disabled
  {{/if}}
  draggable="false"
  {{{attrs}}}
>
  {{#if icon}}
    <span class="button__icon">
      {{> icon _ctx file=icon scale=iconScale }}
    </span>
  {{/if}}

  {{#and (isnt @partial-block null) (isnt text null)}}
    <span class="button__text">{{text}}</span>
    {{{@partial-block}}}
  {{else}}
    {{#if @partial-block}}
      {{{@partial-block}}}
    {{else}}
      <span class="button__text">{{text}}</span>
    {{/if}}
  {{/and}}

</{{default tag "button"}}>