<{{default tag "a"}}
  class="{{class}} {{#if compact}}chat-preview_compact{{/if}} chat-preview {{#or (is tag null) (is tag "a")}}block-link{{/or}} sider"
  {{#or (is tag null) (is tag "a")}}
    href="{{default href "#"}}"
  {{/or}}
>
  <div class="sider__side">
    {{> avatar _ctx size=picSize url=chatData.avatar}}
  </div>
  <div class="chat-preview__content sider__main">
    <div class="chat-preview__content-row">
      <div class="chat-preview__content-slot">
        <h5 class="chat-preview__head heading">{{chatData.name}}</h5>
      </div>
      {{#unless compact}}
        <div class="chat-preview__content-slot_date chat-preview__content-slot">
          {{! todo: использовать хэлпер для форматирования дат}}
          {{> time _ctx value="12:30"}}
        </div>
      {{/unless}}
    </div>
    {{#unless compact}}
      <div class="chat-preview__content-row">
        <div class="chat-preview__content-slot">
          <p class="chat-preview__txt">
            {{#withLast chatData.messages}}
              {{ellipsis this.text 200}}
            {{/withLast}}
          </p>
        </div>
        <div class="chat-preview__content-slot_unread chat-preview__content-slot">
          {{#if chatData.unread}}
            {{> badge _ctx value=chatData.unread}}
          {{/if}}
        </div>
      </div>
    {{/unless}}
  </div>
</{{default tag "a"}}>